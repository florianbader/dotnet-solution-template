schedules:
  - cron: '0 3 * * *'
    displayName: Nighly build
    branches:
      include:
        - master
    always: true

jobs:
  - job: Backend
    steps:
      - template: ../templates/dotnet-publish.yml
        parameters:
          BuildProjects: src/Solution.sln
          TestProjects: '' # remove this if you also want to run your tests in the nightly
          Version: '1.0.0'

      - script: dotnet list .\src\ package --outdated
        displayName: Show outdated versions

      - script: dotnet list .\src\ package --vulnerable
        displayName: Show vulnerabilities

  - job: Frontend
    steps:
      - script: npm outdated
        displayName: Show outdated versions
        workingDirectory: src/Frontend

      - script: npm audit --audit-level=moderate
        displayName: Show vulnerabilities
        workingDirectory: src/Frontend
